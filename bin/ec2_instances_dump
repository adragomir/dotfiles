#!/usr/bin/env python
import json, sys

instances = json.loads(sys.stdin.read())
for tmp in instances:
    for instance in tmp:
        out = []
        stack = None
        logical_id = None
        tags = instance['Tags']
        tags_output = []
        for tag in tags:
            if tag['Key'].startswith('aws:'):
                if tag['Key'] == 'aws:cloudformation:stack-name':
                    stack = tag['Value']
                elif tag['Key'] == 'aws:cloudformation:logical-id':
                    logical_id = tag['Value']
            else:
                tags_output.append("{}={}".format(tag['Key'], tag['Value']))

        if stack != None:
            out.append('stack={}'.format(stack))
        if logical_id != None:
            out.append('logical_id={}'.format(logical_id))
        out.extend(tags_output)
        out.append("private={}".format(instance['PrivateIpAddress']))
        if 'PublicIpAddress' in instance:
            out.append("public={}".format(instance['PublicIpAddress']))
        print ' '.join(out)

