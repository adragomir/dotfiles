#!/bin/bash

NST=$(git stash list | wc -l)
git stash save
NNST=$(git stash list | wc -l)

export CURRENT=$(git symbolic-ref HEAD | gsed -e "s#refs/heads/##")
echo "Synchronising with origin/$CURRENT..."

git fetch -p origin
git rebase -r origin/$CURRENT

if [ "x$NST" == "x$NNST" ]; then
  echo "No stash to pop..."
else
  git stash pop
fi
