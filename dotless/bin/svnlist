#!/usr/bin/env ruby
#
require 'find'
require 'yaml'
$s = ARGV[0]

Find.find( Dir.pwd ) { |path|
    if FileTest.directory?(path)
        active_hash = nil
        has_source_control = %w(.svn CVS _darcs .hg .git .bzr).inject(false) { |memo, val|
            path_scm = path + "/" + val
            is_dir = File.directory?(path_scm)
            matches = path.match( $s )
            memo = memo || is_dir
            if matches
                puts path
            end
            memo
        }
        if has_source_control
            Find.prune       # Don't look any further into this directory.
        else
            next
        end
        else
    end
}
exit


