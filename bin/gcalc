#!/usr/bin/env ruby
# http://gist.github.com/7263
# gcalc <google calculator string> / 26aug2008 chneukirchen / public domain
require 'open-uri'
q = ARGV.join(" ").gsub(/./m) { "%%%02X" % $&[0] }
html = open("http://www.google.com/search?q=#{q}").read
puts (html[%r{<font size=\+1><b>(.*?)</b></h2>}, 1] || 'not a calculation').
gsub(%r{\240|<font size=-2> </font>}, "").gsub("Ã—", "x").
gsub(%r{<sup>(.*?)</sup>}, '^\\1 ')
