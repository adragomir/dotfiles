#!/bin/sh

if [ -z $2 ];then
  echo "Usage: $0 /path/to/key username@host"
  exit
fi

KEY=$1
shift

if [ ! -f $KEY ];then
  echo "private key not found at $KEY"
  echo "please create it with \"ssh-keygen -t dsa\""
  exit
fi

echo "Putting your key ($KEY) on $1... "
ssh -q $* "umask 0077; mkdir -p ~/.ssh ; echo "`cat $KEY`" >> ~/.ssh/authorized_keys"
echo "done!"

