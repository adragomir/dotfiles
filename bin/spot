#!/bin/bash

usage()
{
cat << EOF
usage: $0 options

execute spotlight search over files or emails, or raw spotlight searches

OPTIONS:
    -h: show this message
    -r: the rest is a raw string
    -m: mode: file, email
    -v: show generated mdfind queries
EOF
}

mode=file
dir=$(pwd) 

while getopts 'rvhm:d:' OPTION
do
  case $OPTION in
  v)	verbose=1
        ;;
  h)	usage
        exit 2
        ;;
  m)	mode=$OPTARG
        ;;
  d)	echo $OPTARG; dir=$( (cd -P "$OPTARG" && pwd) )
        ;;
  ?)	usage
        exit 2
        ;;
  esac
done
shift $(($OPTIND - 1))

echo $#
echo $*

echo $dir
echo $mode
printf "Remaining arguments are: %s\n" "$*"
